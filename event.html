<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ゆいかおりイベントデータベース</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        
        .artist1 {
            color: hotpink;
        }
        .artist2 {
            color: deepskyblue;
        }
        .artist3 {
            color: orange;
        }
    </style>
</head>

<body>
    <h2>ゆいかおりイベントデータベース
        <label><font color="hotpink"><input type="radio" name="artistFilter" id="yuiSolo">唯ソロのみ</font></label>
        <label><font color="orange"><input type="radio" name="artistFilter" id="yuikaori">ゆいかおり含む</font></label>
        <label><font color="deepskyblue"><input type="radio" name="artistFilter" id="kaoriSolo" checked>夏織ソロ含む</font></label>
        <label><input type="radio" name="artistFilter" id="stylips">Stylips含む</label>        
        <a href="index.html">楽曲一覧はこちら</a>
    </h2>
    <div id="checkboxContainer"></div>

    <!-- データ順序入れ替えボタン -->
    <button id="toggleOrderButton">データ順序を入れ替える</button>

    <div></div>

    <table id="eventTable">
        <tr>
            <th>年</th>
            <th>月</th>
            <th>日</th>
            <th>曜日</th>
            <th>時刻</th>
            <th>大分類</th>
            <th>中分類</th>
            <th>小分類</th>
            <th>タイトル</th>
            <th>詳細タイトル</th>
            <th>都道府県</th>
            <th>会場</th>
            <th>with</th>
            <th>備考</th>
            <th>セットリスト</th>
        </tr>
    </table>

    <script>
        fetch('event.json')
            .then(response => response.json())
            .then(data => {
                const eventTable = document.getElementById('eventTable');

                let isReversed = false; // データ順序の状態を追跡

                function populateTable(data) {
                    eventTable.innerHTML = '<tr><th>年</th><th>月</th><th>日</th><th>曜日</th><th>時刻</th><th>大分類</th><th>中分類</th><th>小分類</th><th>タイトル</th><th>詳細タイトル</th><th>都道府県</th><th>会場</th><th>with</th><th>備考</th><th>セットリスト</th></tr>';

                    if (data.length === 0) {
                        const row = eventTable.insertRow(-1);
                        const cell = row.insertCell();
                        cell.colSpan = 15;
                        cell.textContent = '条件に一致するイベントはありません。';
                    } else {
                        data.forEach(event => {
                            const row = eventTable.insertRow(-1);
                            let artistClass = '';
                            if (Array.isArray(event.Artist)) {
                                if (event.Artist.length > 0) {
                                    if (event.Artist[0] === '小倉唯') {
                                        artistClass = 'artist1';
                                    } else if (event.Artist[0] === '石原夏織') {
                                        artistClass = 'artist2';
                                    } else if (event.Artist[0] === 'ゆいかおり') {
                                        artistClass = 'artist3';
                                    }
                                }
                            } else {
                                if (event.Artist === '小倉唯') {
                                    artistClass = 'artist1';
                                } else if (event.Artist === '石原夏織') {
                                    artistClass = 'artist2';
                                } else if (event.Artist === 'ゆいかおり') {
                                    artistClass = 'artist3';
                                }
                            }
                            row.insertCell().textContent = event.Year;
                            row.insertCell().textContent = event.Month;
                            row.insertCell().textContent = event.Day;
                            row.insertCell().textContent = event.Weekday;
                            row.insertCell().textContent = event['Start Time'];
                            row.insertCell().textContent = event.class1;
                            row.insertCell().textContent = event.class2;
                            row.insertCell().textContent = event.class3;
                            row.insertCell().innerHTML = `<span class="${artistClass}">${event.title}</span>`;
                            row.insertCell().textContent = event.title2;
                            row.insertCell().textContent = event.prefecture;
                            row.insertCell().textContent = event.Venue;
                            row.insertCell().textContent = event.sponsor;
                            row.insertCell().textContent = event.info;
                            if (event.id) {
                                const setlistCell = row.insertCell();
                                const setlistLink = document.createElement('a');
                                setlistLink.href = `https://tokiyui.github.io/Yui/sub/setlist.html?id=${event.id}`;
                                setlistLink.textContent = 'セットリスト';
                                setlistCell.appendChild(setlistLink);
                            } else {
                                row.insertCell().textContent = '';
                            }
                        });
                    }
                }

                // データ順序を反転させる関数
                function toggleOrder() {
                    isReversed = !isReversed;
                    const orderedData = isReversed ? [...data].reverse() : data;
                    populateTable(orderedData);
                }

                // ラジオボタンによるアーティストフィルタリング
                function filterByArtist(artist) {
                    let filteredData = [];

                    if (artist === 'yuiSolo') {
                        filteredData = data.filter(event => event.Artist === '小倉唯');
                    } else if (artist === 'yuikaori') {
                        filteredData = data.filter(event => event.Artist === '小倉唯' || event.Artist === 'ゆいかおり');
                    } else if (artist === 'kaoriSolo') {
                        filteredData = data.filter(event => event.Artist === '小倉唯' || event.Artist === 'ゆいかおり' || event.Artist === '石原夏織');
                    } else if (artist === 'stylips') {
                        filteredData = data;
                    }

                    return filteredData;
                }

                // 最初にフィルタリングされたデータを表示
                populateTable(data);

                // ボタンのイベントリスナー
                document.getElementById('toggleOrderButton').addEventListener('click', toggleOrder);
            });
    </script>
</body>

</html>
